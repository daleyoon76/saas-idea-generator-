# SaaS 사업기획안 도출 워크플로우

> **문서 운영 규칙**
> - 이 파일은 목표 설계 문서다. 개발 방향이 바뀌거나 단계가 완료되면 업데이트한다.
> - 현재 구현 상태는 `CLAUDE.md`, 알고리즘 상세는 `docs/algorithm.md` 참고.

## 구현 현황 요약 (2026-02-22 기준)

| 단계 | 설명 | 상태 |
|------|------|------|
| 단계 1 | 키워드 받기 | ✅ 완료 |
| 단계 2 | 기획팀장 — Tavily 시장 조사 | ✅ 완료 |
| 단계 2 | 기획팀장 — Reddit 페인포인트 검색 (PullPush.io) | ✅ 완료 (한국어 키워드 자동 번역 포함) |
| 단계 2 | Google Sheets 저장 | ❌ 미구현 (화면 표시만) |
| 단계 3 | 의사결정 1 (아이디어 선택) | ✅ 완료 |
| 단계 4 | 사업전략기획자 (기획서 작성) | ✅ 완료 (에이전트 팀 구조로 강화 예정) |
| 단계 4 | Google Docs 저장 | ⚠️ .docx / .md 파일 다운로드로 대체 |
| 단계 5 | 의사결정 2 (슬라이드 선택) | ❌ 미구현 |
| 단계 6 | 슬라이드 생성 + Google Slides 저장 | ❌ 미구현 |

## 개요

우리팀은 바이브코딩으로 사람들이 많이 쓸 것 같은 SaaS/Agent를 만들려고 한다.  
인터넷을 검색해서 어떤 서비스를 만들면 좋을지 분석한다.  
지금 만들려는 서비스는 **‘어떤 서비스를 만들면 좋을지 알려주는 서비스’**이다.

---

## 단계 1: 키워드 받기 단계

- **사용자 질문**
  - “서비스 아이템을 브레인스토밍해보려고 합니다. 특별히 원하는 키워드가 있으면 넣어주세요. (옵션)”
- **입력 방식**
  - 사용자는 원하는 키워드를 0개 이상 입력할 수 있다.
  - 키워드가 없으면 빈 입력(또는 ‘없음’)으로 처리한다.

---

## 단계 2: ‘기획팀장’ 단계

- **키워드 사용 방법**
  - 키워드 받기 단계에서 사용자가 입력한 키워드가 있으면:
    - 해당 키워드로 인터넷 검색 및 분석 수행
  - 키워드가 없으면:
    - 임의로 유망해 보이는 영역을 선정하여 검색 및 분석 수행

- **외부 신호 수집 (현재 구현)** ✅
  - **Tavily 시장 조사** — 병렬 3개 쿼리(시장 규모/스타트업 동향/AI 적용 사례)
  - **Reddit 페인포인트 검색 (PullPush.io)** — `entrepreneur`, `SaaS`, `startups`, `smallbusiness` 4개 서브레딧 병렬 검색
    - 한국어 키워드는 MyMemory API로 자동 영어 번역 후 검색
    - 두 검색을 병렬 실행하여 지연 없음
  - _(향후 고려)_ Exploding Topics API: Business 플랜 $249/월, 엔드포인트 비공개 → 미구현

- **아이템 발굴 기준**
  - `app/src/assets/criteria.md` (R10 5대 기준) — 서버에서 자동 주입 ✅
  - 위 기준에 따라 가장 좋은 아이디어 3개를 도출한다.

- **사용 모델**
  - Default: **Google Gemini 3.0 Pro** _(현재: Ollama gemma2:9b 기본, Ollama/Claude/Gemini/OpenAI 선택 가능)_
  - 사용자가 모델을 선택 변경할 수 있도록 옵션 제공 ✅ 완료

- **결과 저장 (Google Sheets)**
  - 도출된 3개의 아이디어 후보를 Google Sheets에 저장한다.
  - **열 구성 예시**
    - 아이디어 제목
    - 간단 설명
    - 주요 타깃/시장
    - 발굴 근거(요약)
    - 생성 날짜
    - 생성 시간
  - **저장 규칙**
    - 파일 위치: 내 구글 드라이브 홈 → `내 드라이브 > AI Dev`
    - 파일 이름: `SaaS 사업기획안 도출`
    - 파일이 이미 존재하면:
      - 기존 파일을 열고, 아래 행에 새로운 내용을 **append**한다.
    - 파일이 없으면:
      - 새 파일을 생성하고, 헤더 행을 포함해 데이터를 기록한다.

---

## 단계 3: 의사결정 단계 1

- **사용자에게 보여줄 내용**
  - ‘기획팀장’ 단계에서 도출한 3개의 아이디어 요약 정보
- **사용자 입력**
  - 더 구체적으로 진행하고 싶은 아이디어 선택
  - 또는 **“모두 진행 중단”**에 해당하는 옵션 선택
- **분기 처리**
  - 선택된 아이디어가 하나 이상이면:
    - 해당 아이디어만 다음 단계로 전달
  - “더이상 진행하지 않는다”는 입력인 경우:
    - 프로그램 종료

---

## 단계 4: ‘사업전략기획자’ 단계

- **입력**
  - ‘기획팀장’ 단계 결과물 중, 의사결정 단계 1에서 사용자가 진행하기로 선택한 아이템들
- **업무 내용**
  - 선택된 각 아이템에 대해:
    - `사업기획안 템플릿.docx` 파일을 기반으로 사업기획서를 작성한다.
    - 템플릿 구조를 따르되, **각 항목을 더 구체적으로 확장**하여 작성한다.
    - 각 기획 항목마다 인터넷 검색을 통해 **근거 자료와 링크(URL)** 를 찾아서 함께 제시한다.
- **사용 모델**
  - Default: **Google Gemini 3.0 Deep Research** _(현재: 단계 2와 동일한 모델 선택 UI 공유)_
  - 사용자가 모델을 선택 변경할 수 있도록 옵션 제공 ✅ 완료

- **에이전트 팀 구조 (향후 구현 목표)**
  - 현재 문제: 단일 LLM이 13개 섹션을 한 번에 생성 → 깊이 부족, 모델 의존성 과다
  - 목표 구조: 섹션별 전문 에이전트가 각자 전용 검색 + 전용 프롬프트로 심화 작성

  ```
  Round 1 — 병렬 실행
    Agent 1: 시장/트렌드  →  섹션 2, 8  (TAM/SAM/SOM, 성장률)
    Agent 2: 경쟁 분석    →  섹션 5, 6  (경쟁사 비교표, 차별화)

  Round 2 — 병렬 실행 (Round 1 결과를 컨텍스트로 수신)
    Agent 3: 재무 모델    →  섹션 11, 12  (수익 모델, 사업 전망)
    Agent 4: 서비스 기획  →  섹션 3, 4, 7, 9  (문제 정의, 솔루션, 로드맵)

  Round 3
    Agent 5: 리스크       →  섹션 13  (규제·법률·진입 장벽)

  최종
    Combiner              →  섹션 1(핵심 요약) + 참고문헌 통합
  ```

  - 에이전트별 Claude Haiku 사용 → 비용 절감, 최종 통합만 Sonnet
  - 예상 소요: 병렬화로 현재 ~75초 유지 또는 단축, 품질 대폭 향상
  - 구현 시 진입점: `app/src/app/api/generate/route.ts`의 `business-plan` 분기

- **결과 저장 (Google Docs)**
  - 아이템 별로 각각의 Google Docs 파일을 생성한다.
  - 파일 제목 형식:
    - `자동생성 사업기획안_(기획안 제목)`
  - 저장 위치:
    - 내 구글 드라이브 홈 → `내 드라이브 > AI Dev`

- **다음 단계로 전달**
  - 기획서 작성이 완료되면 사용자에게 보고한다.
  - 사용자가 OK를 하면, 해당 기획 내용을 다음 단계(슬라이드 생성 단계)로 넘긴다.

---

## 단계 5: 의사결정 단계 2

- **사용자에게 보여줄 내용**
  - ‘사업전략기획자’ 단계에서 생성된 사업기획서 요약 또는 본문 링크
- **사용자 입력**
  - 어떤 아이디어를 슬라이드까지 진행할지 선택
  - 또는 **“모두 진행 중단”**에 해당하는 옵션 선택
- **분기 처리**
  - 선택된 아이디어가 하나 이상이면:
    - 해당 아이디어만 다음 단계로 전달
  - “더이상 진행하지 않는다”는 입력인 경우:
    - 프로그램 종료

---

## 단계 6: ‘슬라이드 잘 만드는 기획팀 인턴’ 단계

- **입력**
  - ‘사업전략기획자’ 단계에서 생성된 사업기획서(사용자가 슬라이드 생성까지 진행하기로 선택한 아이템들)
- **업무 내용**
  - 각 사업기획서를 바탕으로 프레젠테이션 슬라이드를 생성한다.
  - **슬라이드 구성 원칙**
    - 단순 텍스트 나열이 아니라:
      - 내용 구조에 맞는 시각적 구성(도표, 다이어그램 등)을 포함
      - 인터넷 검색을 통해 적절한 이미지를 찾아서 삽입
    - 핵심 메시지가 한 장마다 명확히 드러나도록 구성
- **결과 저장 (Google Slides)**
  - 아이템 별로 각각의 Google Slides 파일을 생성한다.
  - 파일 제목 형식:
    - `자동생성 사업기획안_(기획안 제목)`
  - 저장 위치:
    - 내 구글 드라이브 홈 → `내 드라이브 > AI Dev`

---

## 전체 플로우 요약

1. **키워드 받기 단계**: 사용자로부터 선택적 키워드 입력 받기  
2. **기획팀장 단계**: 발굴 기준 문서를 참고해 인터넷 검색 후 아이디어 3개 도출 및 Google Sheets 저장  
3. **의사결정 단계 1**: 어떤 아이디어를 더 진행할지 선택 (없으면 종료)  
4. **사업전략기획자 단계**: 선택된 아이템에 대해 템플릿+리서치 기반 사업기획서 작성, Google Docs에 저장  
5. **의사결정 단계 2**: 슬라이드로 이어갈 아이디어 선택 (없으면 종료)  
6. **슬라이드 잘 만드는 기획팀 인턴 단계**: 기획서를 기반으로 시각화 포함 슬라이드 작성, Google Slides에 저장
